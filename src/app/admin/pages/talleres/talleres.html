<div class="main-content">
    <h1 class="mb-4 text-harmony-title">Gestión de Talleres y Horarios</h1>
    <hr />

    <!-- MENSAJES DE ÉXITO Y ERROR -->
    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle-fill me-2"></i> {{ successMessage }}
        <button type="button" class="btn-close" (click)="successMessage = ''" aria-label="Close"></button>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i> {{ errorMessage }}
        <button type="button" class="btn-close" (click)="errorMessage = ''" aria-label="Close"></button>
    </div>

    <!-- ✅ SECCIÓN DE CARGA DE IMÁGENES -->
    <section class="mb-4 p-3 border rounded bg-light">
        <h5 class="mb-3"><i class="bi bi-cloud-upload me-2"></i> Subir Nueva Imagen</h5>
        <div class="row align-items-end">
            <div class="col-md-8">
                <input type="file" class="form-control" id="uploadImageFile" accept="image/*"
                    (change)="onUploadNewImage($event)" [disabled]="uploadingNewImage">
            </div>
            <div class="col-md-4">
                <button class="btn btn-primary w-100" (click)="triggerFileUpload()" [disabled]="uploadingNewImage">
                    <i class="bi bi-upload me-2"></i>
                    {{ uploadingNewImage ? 'Subiendo...' : 'Subir Imagen' }}
                </button>
            </div>
        </div>
        <small class="text-muted mt-2 d-block">
            <i class="bi bi-info-circle"></i> Las imágenes se guardarán con su nombre original en el servidor
        </small>
    </section>

    <!-- SECCIÓN 1: REGISTRAR NUEVO TALLER -->
    <section id="nuevo-taller" class="mb-5 p-4 border rounded shadow-sm bg-white">
        <h3 class="text-harmony-title mb-4"><i class="bi bi-plus-circle me-2"></i> Registrar Nuevo Taller</h3>
        <form (ngSubmit)="registrarTaller()" #tallerForm="ngForm">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="nombreTaller" class="form-label">Nombre del Taller *</label>
                    <input type="text" class="form-control" id="nombreTaller" [(ngModel)]="nuevoTaller.nombre"
                        name="nombre" required placeholder="Ej. Piano Básico" />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="descripcionTaller" class="form-label">Descripción *</label>
                    <textarea class="form-control" id="descripcionTaller" [(ngModel)]="nuevoTaller.descripcion"
                        name="descripcion" rows="1" required placeholder="Breve descripción..."></textarea>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="duracionSemanas" class="form-label">Duración (Semanas) *</label>
                    <input type="number" class="form-control" id="duracionSemanas"
                        [(ngModel)]="nuevoTaller.duracionSemanas" name="duracionSemanas" min="1" required />
                </div>
                <div class="col-md-4 mb-3">
                    <label for="clasesPorSemana" class="form-label">Clases por Semana *</label>
                    <input type="number" class="form-control" id="clasesPorSemana"
                        [(ngModel)]="nuevoTaller.clasesPorSemana" name="clasesPorSemana" min="1" required />
                </div>
                <div class="col-md-4 mb-3">
                    <label for="precioTaller" class="form-label">Precio Base (S/) *</label>
                    <input type="number" class="form-control" id="precioTaller" [(ngModel)]="nuevoTaller.precio"
                        name="precio" step="0.01" min="0" required />
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="imagenTallerSelect" class="form-label">Imagen Taller (Detalle) *</label>
                    <select class="form-select" id="imagenTallerSelect" [(ngModel)]="nuevoTaller.imagenTaller"
                        name="imagenTaller" required>
                        <option value="">-- Seleccionar imagen --</option>
                        <option *ngFor="let img of imagenesDisponibles" [value]="img.url">
                            {{ img.filename }}
                        </option>
                    </select>
                    <div *ngIf="nuevoTaller.imagenTaller" class="mt-2">
                        <img [src]="getImagePreview(nuevoTaller.imagenTaller)" class="img-thumbnail"
                            style="max-height: 120px;" alt="Preview">
                    </div>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="imagenInicioSelect" class="form-label">Imagen Inicio (Principal) *</label>
                    <select class="form-select" id="imagenInicioSelect" [(ngModel)]="nuevoTaller.imagenInicio"
                        name="imagenInicio" required>
                        <option value="">-- Seleccionar imagen --</option>
                        <option *ngFor="let img of imagenesDisponibles" [value]="img.url">
                            {{ img.filename }}
                        </option>
                    </select>
                    <div *ngIf="nuevoTaller.imagenInicio" class="mt-2">
                        <img [src]="getImagePreview(nuevoTaller.imagenInicio)" class="img-thumbnail"
                            style="max-height: 120px;" alt="Preview">
                    </div>
                </div>
            </div>

            <!-- SUBIDA DE IMAGEN -->
            <div class="mb-3 p-3 bg-light border rounded">
                <label class="form-label fw-bold text-secondary">¿No encuentras la imagen?</label>
                <div class="d-flex align-items-center gap-3">
                    <button type="button" class="btn btn-outline-primary btn-sm" (click)="triggerFileUpload()"
                        [disabled]="uploadingNewImage">
                        <i class="bi bi-cloud-upload me-1"></i> Subir Nueva Imagen
                    </button>
                    <span *ngIf="uploadingNewImage" class="text-muted small">
                        <span class="spinner-border spinner-border-sm me-1"></span> Subiendo...
                    </span>
                    <input type="file" id="uploadImageFile" class="d-none" (change)="onUploadNewImage($event)"
                        accept="image/*">
                </div>
            </div>

            <div class="mb-3">
                <label for="temasTaller" class="form-label">Temas (Opcional)</label>
                <textarea class="form-control" id="temasTaller" [(ngModel)]="nuevoTaller.temas" name="temas"
                    rows="2"></textarea>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg" [disabled]="tallerForm.invalid">
                    <i class="bi bi-save me-2"></i> Registrar Taller
                </button>
            </div>
        </form>
    </section>

    <!-- SECCIÓN 2: AÑADIR HORARIO A TALLER -->
    <section id="nuevo-horario" class="mb-5 p-4 border rounded shadow-sm bg-light-warning">
        <h3 class="text-harmony-title mb-4"><i class="bi bi-calendar-plus me-2"></i> Añadir Horario a Taller</h3>
        <form (ngSubmit)="registrarHorario()" #horarioForm="ngForm">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="tallerSelect" class="form-label">Seleccionar Taller *</label>
                    <select class="form-select" id="tallerSelect" [(ngModel)]="nuevoHorario.tallerId" name="tallerId"
                        (ngModelChange)="onTallerSeleccionadoForHorario($event)" required>
                        <option value="">-- Seleccione --</option>
                        <option *ngFor="let taller of talleresActivos" [value]="taller.id">{{ taller.nombre }}</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="profesorSelect" class="form-label">Profesor *</label>
                    <select class="form-select" id="profesorSelect" [(ngModel)]="nuevoHorario.profesorId"
                        name="profesorId" required>
                        <option value="">-- Seleccione --</option>
                        <option *ngFor="let prof of profesores" [value]="prof.id">{{ prof.nombreCompleto }}</option>
                    </select>
                </div>
            </div>

            <div class="mb-3" *ngIf="nuevoHorario.tallerId">
                <label class="form-label d-block">
                    Día(s) de la Semana *
                    <span *ngIf="maxClasesPorSemana > 0" class="badge bg-info text-dark">
                        Selecciona {{ maxClasesPorSemana }} días
                    </span>
                </label>
                <div class="form-check form-check-inline" *ngFor="let dia of diasSemana">
                    <input class="form-check-input" type="checkbox" [id]="'dia_' + dia" [checked]="isDiaSelected(dia)"
                        (change)="toggleDia(dia)"
                        [disabled]="!isDiaSelected(dia) && nuevoHorario.diasDeClase.length >= maxClasesPorSemana" />
                    <label class="form-check-label" [for]="'dia_' + dia">{{ dia }}</label>
                </div>
                <div *ngIf="nuevoHorario.diasDeClase.length !== maxClasesPorSemana && maxClasesPorSemana > 0"
                    class="text-danger small mt-1">
                    Debes seleccionar exactamente {{ maxClasesPorSemana }} días.
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="horaInicioHorario" class="form-label">Hora de Inicio (HH:MM) *</label>
                    <input type="time" class="form-control" id="horaInicioHorario" [(ngModel)]="nuevoHorario.horaInicio"
                        name="horaInicio" required />
                </div>
                <div class="col-md-4 mb-3">
                    <label for="horaFinHorario" class="form-label">Hora de Fin (HH:MM) *</label>
                    <input type="time" class="form-control" id="horaFinHorario" [(ngModel)]="nuevoHorario.horaFin"
                        name="horaFin" required />
                </div>
                <div class="col-md-4 mb-3">
                    <label for="fechaInicioHorario" class="form-label">Fecha de Inicio *</label>
                    <input type="date" class="form-control" id="fechaInicioHorario"
                        [(ngModel)]="nuevoHorario.fechaInicio" name="fechaInicio" required />
                </div>
            </div>

            <div class="mb-3">
                <label for="vacantesMaximasHorario" class="form-label">Vacantes Máximas *</label>
                <input type="number" class="form-control" id="vacantesMaximasHorario"
                    [(ngModel)]="nuevoHorario.vacantesDisponibles" name="vacantesDisponibles" min="1" required />
            </div>

            <div class="d-grid mt-4">
                <button type="submit" class="btn btn-warning btn-lg" [disabled]="horarioForm.invalid">
                    <i class="bi bi-calendar-check me-2"></i> Añadir Horario
                </button>
            </div>
        </form>
    </section>

    <!-- SECCIÓN 3: EDITAR INFORMACIÓN DEL TALLER -->
    <section id="edicion-taller" class="mb-5 p-4 border rounded shadow-sm bg-light-info">
        <h3 class="text-harmony-title mb-4"><i class="bi bi-pencil-square me-2"></i> Editar Información del Taller</h3>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="tallerAEditar" class="form-label">1. Seleccionar Taller a Editar (Solo Activos)</label>
                <select class="form-select" id="tallerAEditar" [(ngModel)]="tallerParaEditarId"
                    (ngModelChange)="onTallerAEditarChange($event)" name="tallerAEditar">
                    <option value="">-- Seleccione un Taller --</option>
                    <option *ngFor="let taller of talleresActivos" [value]="taller.id">{{ taller.nombre }}</option>
                </select>
            </div>
        </div>

        <form *ngIf="editFormTallerVisible && tallerAEditar" #editTallerForm="ngForm"
            (ngSubmit)="guardarCambiosTaller()">
            <h5 class="mt-4 mb-3 text-secondary">2. Opciones para Editar</h5>
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="edit-nombreTaller" class="form-label">Nombre del Taller</label>
                        <input type="text" class="form-control" id="edit-nombreTaller"
                            [(ngModel)]="tallerAEditar.nombre" name="nombre" required />
                    </div>
                    <div class="mb-3">
                        <label for="edit-descripcionTaller" class="form-label">Descripción</label>
                        <textarea class="form-control" id="edit-descripcionTaller"
                            [(ngModel)]="tallerAEditar.descripcion" name="descripcion" rows="3" required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="edit-duracionSemanas" class="form-label">Duración (Semanas)</label>
                            <input type="number" class="form-control" id="edit-duracionSemanas"
                                [(ngModel)]="tallerAEditar.duracionSemanas" name="duracionSemanas" min="1" required />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="edit-clasesPorSemana" class="form-label">Clases por Semana</label>
                            <input type="number" class="form-control" id="edit-clasesPorSemana"
                                [(ngModel)]="tallerAEditar.clasesPorSemana" name="clasesPorSemana" min="1" required />
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="edit-precioTaller" class="form-label">Precio Base (S/)</label>
                        <input type="number" class="form-control" id="edit-precioTaller"
                            [(ngModel)]="tallerAEditar.precio" name="precio" step="0.01" min="0" required />
                    </div>
                    <div class="mb-3">
                        <label for="temasEditar" class="form-label">Temas del Taller</label>
                        <textarea class="form-control" id="temasEditar" [(ngModel)]="tallerAEditar.temas" name="temas"
                            rows="4"></textarea>
                    </div>
                </div>
                <div class="col-md-6">
                    <!-- ✅ SELECTOR DE IMAGEN TALLER (Edición) -->
                    <div class="mb-3">
                        <label for="edit-imagenTallerSelect" class="form-label">Imagen Taller (Detalle)</label>
                        <select class="form-select" id="edit-imagenTallerSelect"
                            [(ngModel)]="tallerAEditar.imagenTaller" name="imagenTaller" required>
                            <option value="">-- Seleccionar imagen --</option>
                            <option *ngFor="let img of imagenesDisponibles" [value]="img.url">
                                {{ img.filename }}
                            </option>
                        </select>
                        <div *ngIf="tallerAEditar.imagenTaller" class="mt-2">
                            <img [src]="getImagePreview(tallerAEditar.imagenTaller)" class="img-thumbnail"
                                style="max-height: 120px;" alt="Preview">
                        </div>
                    </div>

                    <!-- ✅ SELECTOR DE IMAGEN INICIO (Edición) -->
                    <div class="mb-3">
                        <label for="edit-imagenInicioSelect" class="form-label">Imagen Inicio (Principal)</label>
                        <select class="form-select" id="edit-imagenInicioSelect"
                            [(ngModel)]="tallerAEditar.imagenInicio" name="imagenInicio" required>
                            <option value="">-- Seleccionar imagen --</option>
                            <option *ngFor="let img of imagenesDisponibles" [value]="img.url">
                                {{ img.filename }}
                            </option>
                        </select>
                        <div *ngIf="tallerAEditar.imagenInicio" class="mt-2">
                            <img [src]="getImagePreview(tallerAEditar.imagenInicio)" class="img-thumbnail"
                                style="max-height: 120px;" alt="Preview">
                        </div>
                    </div>

                    <div class="form-check form-switch mb-4">
                        <input class="form-check-input" type="checkbox" id="edit-taller-activo"
                            [(ngModel)]="tallerAEditar.activo" name="activo" />
                        <label class="form-check-label" for="edit-taller-activo">
                            <strong>Taller Activo / Disponible</strong>
                            <small class="text-muted">(Desmarcar para dar de baja)</small>
                        </label>
                    </div>

                    <div class="mt-4">
                        <button type="submit" class="btn btn-success" [disabled]="editTallerForm.invalid">
                            <i class="bi bi-save me-1"></i> Guardar Cambios del Taller
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </section>

    <!-- SECCIÓN 4: EDITAR HORARIO ESPECÍFICO -->
    <section id="edicion-horario-seccion" class="mb-5 p-4 border rounded shadow-sm bg-light-danger">
        <h3 class="text-harmony-title mb-4"><i class="bi bi-calendar-minus me-2"></i> Editar Horario Específico</h3>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="tallerParaHorarioEditar" class="form-label">1. Seleccionar Taller</label>
                <select class="form-select" id="tallerParaHorarioEditar" [(ngModel)]="tallerParaHorarioEditar"
                    name="tallerParaHorarioEditar" (change)="onTallerParaHorarioChange(tallerParaHorarioEditar)">
                    <option value="">-- Seleccione un Taller --</option>
                    <option *ngFor="let taller of talleresActivos" [value]="taller.id">{{ taller.nombre }}</option>
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label for="horarioAEditar" class="form-label">2. Seleccionar Horario</label>
                <select class="form-select" id="horarioAEditar" [disabled]="horariosDelTaller.length === 0"
                    [(ngModel)]="horarioAEditarId" (ngModelChange)="onHorarioAEditarChange($event)"
                    name="horarioAEditar">
                    <option value="">-- Seleccione un Horario --</option>
                    <option *ngFor="let horario of horariosDelTaller" [value]="horario.id">
                        {{ horario.diasDeClase }} | {{ horario.horaInicio }} a {{ horario.horaFin }}
                        ({{ horario.profesor?.nombreCompleto || 'Sin Profesor' }})
                    </option>
                </select>
            </div>
        </div>

        <form *ngIf="editFormHorarioVisible && horarioAEditar" #editHorarioForm="ngForm"
            (ngSubmit)="guardarCambiosHorario()">
            <h5 class="mt-4 mb-3 text-secondary">3. Opciones para Editar</h5>

            <div class="row">
                <div class="col-md-12 mb-3">
                    <label for="edit-profesor-seccion" class="form-label">Profesor Asignado</label>
                    <select class="form-select" id="edit-profesor-seccion" [(ngModel)]="horarioAEditar.profesor"
                        name="profesor" required>
                        <option [ngValue]="null">-- Seleccionar Profesor --</option>
                        <option *ngFor="let profesor of profesores" [ngValue]="profesor">{{ profesor.nombreCompleto }}
                        </option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 mb-3">
                    <label class="form-label d-block">
                        Día(s) de la Semana *
                        <span *ngIf="maxClasesPorSemanaEdit > 0" class="badge bg-info text-dark">
                            Selecciona {{ maxClasesPorSemanaEdit }} días
                        </span>
                    </label>
                    <div class="form-check form-check-inline" *ngFor="let dia of diasSemana">
                        <input class="form-check-input" type="checkbox" [id]="'edit_dia_' + dia"
                            [checked]="isDiaSelectedEdit(dia)" (change)="toggleDiaEdit(dia)"
                            [disabled]="!isDiaSelectedEdit(dia) && diasDeClaseEdit.length >= maxClasesPorSemanaEdit" />
                        <label class="form-check-label" [for]="'edit_dia_' + dia">{{ dia }}</label>
                    </div>
                    <div *ngIf="diasDeClaseEdit.length !== maxClasesPorSemanaEdit && maxClasesPorSemanaEdit > 0"
                        class="text-danger small mt-1">
                        Debes seleccionar exactamente {{ maxClasesPorSemanaEdit }} días.
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="edit-vacantes-seccion" class="form-label">Vacantes Máximas</label>
                    <input type="number" class="form-control" id="edit-vacantes-seccion"
                        [(ngModel)]="horarioAEditar.vacantesDisponibles" name="vacantesDisponibles" min="1" required />
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="edit-hora-inicio-seccion" class="form-label">Hora de Inicio (HH:MM)</label>
                    <input type="time" class="form-control" id="edit-hora-inicio-seccion"
                        [(ngModel)]="horarioAEditar.horaInicio" name="horaInicio" required />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="edit-hora-fin-seccion" class="form-label">Hora de Fin (HH:MM)</label>
                    <input type="time" class="form-control" id="edit-hora-fin-seccion"
                        [(ngModel)]="horarioAEditar.horaFin" name="horaFin" required />
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="edit-fecha-inicio-seccion" class="form-label">Fecha de Inicio</label>
                    <input type="date" class="form-control" id="edit-fecha-inicio-seccion"
                        [(ngModel)]="horarioAEditar.fechaInicio" name="fechaInicio" (change)="actualizarFechaFin()"
                        required />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="edit-fecha-fin-seccion" class="form-label">Fecha de Fin (Calculada)</label>
                    <input type="date" class="form-control bg-light" id="edit-fecha-fin-seccion"
                        [(ngModel)]="horarioAEditar.fechaFin" name="fechaFin" readonly />
                </div>
            </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-danger" [disabled]="editHorarioForm.invalid">
                    <i class="bi bi-save me-1"></i> Guardar Cambios del Horario
                </button>
            </div>
        </form>
    </section>

    <!-- SECCIÓN 5: LISTADO DE TALLERES Y HORARIOS -->
    <section id="listado-talleres-horarios" class="m-2">
        <h2 class="mb-4">Listado de Talleres y Horarios</h2>

        <div class="accordion" id="accordionTalleres">
            <div *ngFor="let taller of talleres; let first = first" class="accordion-item">
                <h2 class="accordion-header" [id]="'heading' + taller.id">
                    <button class="accordion-button" [class.collapsed]="!first" type="button" data-bs-toggle="collapse"
                        [attr.data-bs-target]="'#collapse' + taller.id" [attr.aria-expanded]="first"
                        [attr.aria-controls]="'collapse' + taller.id">
                        <strong>{{ taller.nombre }}</strong>
                        <span class="badge ms-2" [class.bg-success]="taller.activo"
                            [class.bg-secondary]="!taller.activo">
                            {{ taller.activo ? 'Activo' : 'Inactivo' }}
                        </span>
                    </button>
                </h2>

                <div [id]="'collapse' + taller.id" class="accordion-collapse collapse" [class.show]="first"
                    [attr.aria-labelledby]="'heading' + taller.id" data-bs-parent="#accordionTalleres">
                    <div class="accordion-body p-0">
                        <table class="table table-striped table-hover mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>ID Horario</th>
                                    <th>Profesor</th>
                                    <th>Día(s)</th>
                                    <th>Hora</th>
                                    <th>Vacantes</th>
                                    <th>Fecha de inicio</th>
                                    <th>Fecha de Fin</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- ✅ HORARIOS ACTIVOS -->
                                <tr *ngFor="let horario of getHorariosActivos(taller)">
                                    <td>{{ horario.id }}</td>
                                    <td>{{ horario.profesor?.nombreCompleto || 'Sin Asignar' }}</td>
                                    <td>{{ horario.diasDeClase }}</td>
                                    <td>{{ horario.horaInicio }} - {{ horario.horaFin }}</td>
                                    <td>{{ horario.vacantesDisponibles }}</td>
                                    <td>
                                        <span>{{ horario.fechaInicio }}</span>
                                        <span *ngIf="horario.fechaInicio <= today"
                                            class="text-danger fw-bold ms-1">(comenzado)</span>
                                        <span *ngIf="horario.fechaInicio > today" class="text-success fw-bold ms-1">(por
                                            iniciar)</span>
                                    </td>
                                    <td>{{ horario.fechaFin }}</td>
                                    <td>
                                        <button type="button" (click)="eliminarHorario(horario.id)"
                                            class="btn btn-danger btn-sm" title="Eliminar Horario">
                                            <i class="bi bi-trash"></i> Eliminar
                                        </button>
                                    </td>
                                </tr>
                                <tr *ngIf="getHorariosActivos(taller).length === 0">
                                    <td colspan="8" class="text-center text-muted">No hay horarios activos para este
                                        taller</td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- ✅ SECCIÓN DE HORARIOS FINALIZADOS -->
                        <div *ngIf="getHorariosFinalizados(taller).length > 0" class="mt-4 p-3 bg-light border-top">
                            <h6 class="text-secondary mb-3"><i class="bi bi-archive me-2"></i> Horarios Finalizados</h6>
                            <table class="table table-sm table-bordered text-muted">
                                <thead class="table-light">
                                    <tr>
                                        <th>ID</th>
                                        <th>Profesor</th>
                                        <th>Días</th>
                                        <th>Horario</th>
                                        <th>Inicio</th>
                                        <th>Fin</th>
                                        <th>Estado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let horario of getHorariosFinalizados(taller)">
                                        <td>{{ horario.id }}</td>
                                        <td>{{ horario.profesor?.nombreCompleto || 'Sin Asignar' }}</td>
                                        <td>{{ horario.diasDeClase }}</td>
                                        <td>{{ horario.horaInicio }} - {{ horario.horaFin }}</td>
                                        <td>{{ horario.fechaInicio }}</td>
                                        <td>{{ horario.fechaFin }}</td>
                                        <td><span class="badge bg-secondary">Finalizado</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>